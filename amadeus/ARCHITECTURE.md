# Amadeus æ’ä»¶ç³»ç»Ÿæ¶æ„

## ğŸ“ ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Main Application                        â”‚
â”‚                            (main.rs)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ åˆ›å»ºå¹¶ç®¡ç†
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PluginRegistry                             â”‚
â”‚                      (plugin.rs)                                 â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  plugins: Vec<Box<dyn Plugin>>                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  Methods:                                                        â”‚
â”‚  â€¢ register()      - æ³¨å†Œæ’ä»¶                                   â”‚
â”‚  â€¢ init_all()      - åˆå§‹åŒ–æ‰€æœ‰æ’ä»¶                             â”‚
â”‚  â€¢ start_all()     - å¯åŠ¨æ‰€æœ‰æ’ä»¶                               â”‚
â”‚  â€¢ run_all()       - è¿è¡Œæ‰€æœ‰æ’ä»¶                               â”‚
â”‚  â€¢ stop_all()      - åœæ­¢æ‰€æœ‰æ’ä»¶                               â”‚
â”‚  â€¢ load_config()   - ä» JSON åŠ è½½é…ç½®                           â”‚
â”‚  â€¢ save_config()   - ä¿å­˜é…ç½®åˆ° JSON                            â”‚
â”‚  â€¢ export_metadata() - å¯¼å‡ºå…ƒæ•°æ®                               â”‚
â”‚  â€¢ list_plugins()  - åˆ—å‡ºæ‰€æœ‰æ’ä»¶                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                  â”‚                â”‚
                   â”‚                  â”‚                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                             â”‚                          â”‚
        â–¼                             â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Code4rena    â”‚          â”‚  Example Plugin   â”‚     â”‚  Custom Plugin â”‚
â”‚   Plugin      â”‚          â”‚   (Multi-file)    â”‚     â”‚    (Future)    â”‚
â”‚ (Single file) â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
        â”‚                            â”‚
        â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                 â”‚
        â”‚                   â–¼                 â–¼
        â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚          â”‚  config.rs  â”‚   â”‚ handler.rs   â”‚
        â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         å®ç° Plugin Trait                       â”‚
        â”‚                                                  â”‚
        â”‚  â€¢ metadata() -> &PluginMetadata                â”‚
        â”‚  â€¢ init()     -> Result<()>                     â”‚
        â”‚  â€¢ start()    -> Result<()>                     â”‚
        â”‚  â€¢ run()      -> Result<()>                     â”‚
        â”‚  â€¢ stop()     -> Result<()>                     â”‚
        â”‚  â€¢ is_enabled() -> bool                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ç”Ÿå‘½å‘¨æœŸæµç¨‹

```
åº”ç”¨å¯åŠ¨
   â”‚
   â–¼
åˆ›å»º PluginRegistry
   â”‚
   â–¼
æ³¨å†Œæ’ä»¶ (register)
   â”‚
   â”œâ”€â–º Plugin 1
   â”œâ”€â–º Plugin 2
   â””â”€â–º Plugin 3
   â”‚
   â–¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åˆå§‹åŒ–é˜¶æ®µ (init_all)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   â”‚
   â”œâ”€â–º Plugin 1.init()  â”€â”
   â”‚   â€¢ åŠ è½½é…ç½®        â”‚
   â”‚   â€¢ éªŒè¯è®¾ç½®        â”‚
   â”‚   â€¢ åˆå§‹åŒ–çŠ¶æ€      â”‚
   â”‚                     â”‚
   â”œâ”€â–º Plugin 2.init()  â”€â”¤
   â”‚   â€¢ è¯»å–æ–‡ä»¶        â”‚
   â”‚   â€¢ è¿æ¥æ•°æ®åº“      â”‚
   â”‚                     â”‚
   â””â”€â–º Plugin 3.init()  â”€â”˜
   â”‚
   â–¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å¯åŠ¨é˜¶æ®µ (start_all)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   â”‚
   â”œâ”€â–º Plugin 1.start() â”€â”
   â”‚   â€¢ å»ºç«‹è¿æ¥         â”‚
   â”‚   â€¢ å¯åŠ¨æœåŠ¡         â”‚
   â”‚                     â”‚
   â”œâ”€â–º Plugin 2.start() â”€â”¤
   â”‚   â€¢ æ‰“å¼€ç«¯å£         â”‚
   â”‚   â€¢ å‡†å¤‡èµ„æº         â”‚
   â”‚                     â”‚
   â””â”€â–º Plugin 3.start() â”€â”˜
   â”‚
   â–¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
è¿è¡Œé˜¶æ®µ (run_all)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   â”‚
   â”œâ”€â–º Plugin 1.run()   â”€â”
   â”‚   â€¢ æ‰§è¡Œä¸»é€»è¾‘      â”‚
   â”‚   â€¢ å¤„ç†æ•°æ®        â”‚
   â”‚                     â”‚
   â”œâ”€â–º Plugin 2.run()   â”€â”¤
   â”‚   â€¢ æ‰§è¡Œä»»åŠ¡        â”‚
   â”‚   â€¢ ç”ŸæˆæŠ¥å‘Š        â”‚
   â”‚                     â”‚
   â””â”€â–º Plugin 3.run()   â”€â”˜
   â”‚
   â–¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åœæ­¢é˜¶æ®µ (stop_all)
(âš ï¸ æŒ‰ç›¸åé¡ºåº)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   â”‚
   â”œâ”€â–º Plugin 3.stop()  â”€â”
   â”‚   â€¢ ä¿å­˜çŠ¶æ€        â”‚
   â”‚   â€¢ å…³é—­è¿æ¥        â”‚
   â”‚                     â”‚
   â”œâ”€â–º Plugin 2.stop()  â”€â”¤
   â”‚   â€¢ æ¸…ç†èµ„æº        â”‚
   â”‚   â€¢ é‡Šæ”¾å†…å­˜        â”‚
   â”‚                     â”‚
   â””â”€â–º Plugin 1.stop()  â”€â”˜
   â”‚
   â–¼
åº”ç”¨é€€å‡º
```

## ğŸ—ï¸ æ¨¡å—ç»„ç»‡

```
src/
â”‚
â”œâ”€â”€ main.rs                          # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ èŒè´£:
â”‚       â€¢ åˆ›å»º PluginRegistry
â”‚       â€¢ æ³¨å†Œæ‰€æœ‰æ’ä»¶
â”‚       â€¢ æ‰§è¡Œæ’ä»¶ç”Ÿå‘½å‘¨æœŸ
â”‚       â€¢ å¤„ç†é”™è¯¯
â”‚
â”œâ”€â”€ plugin.rs                        # æ’ä»¶ç³»ç»Ÿæ ¸å¿ƒ
â”‚   â”œâ”€â”€ Plugin trait                 # æ’ä»¶æ¥å£å®šä¹‰
â”‚   â”‚   â””â”€â”€ è¦æ±‚: Send + Sync
â”‚   â”‚
â”‚   â”œâ”€â”€ PluginMetadata              # æ’ä»¶å…ƒæ•°æ®
â”‚   â”‚   â”œâ”€â”€ åŸºæœ¬ä¿¡æ¯: name, description, version
â”‚   â”‚   â”œâ”€â”€ æ§åˆ¶: enabled_by_default
â”‚   â”‚   â”œâ”€â”€ ä½œè€…: author
â”‚   â”‚   â””â”€â”€ æ‰©å±•: properties (HashMap)
â”‚   â”‚
â”‚   â””â”€â”€ PluginRegistry              # æ’ä»¶ç®¡ç†å™¨
â”‚       â”œâ”€â”€ å­˜å‚¨: Vec<Box<dyn Plugin>>
â”‚       â”œâ”€â”€ æ³¨å†Œ: register()
â”‚       â”œâ”€â”€ ç”Ÿå‘½å‘¨æœŸ: init/start/run/stop_all()
â”‚       â””â”€â”€ å·¥å…·: list, export, load/save config
â”‚
â””â”€â”€ plugins/                         # æ’ä»¶ç›®å½•
    â”‚
    â”œâ”€â”€ mod.rs                       # æ¨¡å—å¯¼å‡º
    â”‚   â””â”€â”€ å¯¼å‡ºæ‰€æœ‰æ’ä»¶æ¨¡å—
    â”‚
    â”œâ”€â”€ code4rena.rs                # å•æ–‡ä»¶æ’ä»¶
    â”‚   â”œâ”€â”€ Code4renaPlugin struct
    â”‚   â”œâ”€â”€ å®ç° Plugin trait
    â”‚   â””â”€â”€ æ’ä»¶ç‰¹å®šé€»è¾‘
    â”‚
    â””â”€â”€ example_plugin/              # å¤šæ–‡ä»¶æ’ä»¶
        â”œâ”€â”€ mod.rs                   # æ’ä»¶ä¸»æ¨¡å—
        â”‚   â”œâ”€â”€ ExamplePlugin struct
        â”‚   â”œâ”€â”€ å®ç° Plugin trait
        â”‚   â””â”€â”€ åè°ƒå­æ¨¡å—
        â”‚
        â”œâ”€â”€ config.rs                # é…ç½®ç®¡ç†
        â”‚   â”œâ”€â”€ PluginConfig struct
        â”‚   â””â”€â”€ é…ç½®åŠ è½½/éªŒè¯
        â”‚
        â””â”€â”€ handler.rs               # ä¸šåŠ¡é€»è¾‘
            â”œâ”€â”€ DataHandler struct
            â””â”€â”€ æ•°æ®å¤„ç†é€»è¾‘
```

## ğŸ¯ æ•°æ®æµ

### 1. æ’ä»¶æ³¨å†Œæµç¨‹

```
ç”¨æˆ·ä»£ç                     PluginRegistry              Plugin
   â”‚                              â”‚                        â”‚
   â”‚ MyPlugin::new()              â”‚                        â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
   â”‚                              â”‚                        â”‚
   â”‚                       åˆ›å»º Plugin å®ä¾‹                 â”‚
   â”‚                              â”‚                        â”‚
   â”‚ registry.register(plugin)    â”‚                        â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
   â”‚                              â”‚                        â”‚
   â”‚                      Box::new(plugin)                 â”‚
   â”‚                              â”‚                        â”‚
   â”‚                    plugins.push(boxed)                â”‚
   â”‚                              â”‚                        â”‚
   â”‚          âœ“ æ³¨å†ŒæˆåŠŸ          â”‚                        â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚
```

### 2. æ’ä»¶æ‰§è¡Œæµç¨‹

```
PluginRegistry             Plugin 1         Plugin 2         Plugin 3
      â”‚                       â”‚                â”‚                â”‚
      â”‚ init_all()            â”‚                â”‚                â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚                â”‚
      â”‚                       â”‚ init()         â”‚                â”‚
      â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–º       â”‚                â”‚
      â”‚                       â”‚       âœ“        â”‚                â”‚
      â”‚                       â”‚â—„â”€â”€â”€â”€â”€â”€â”€        â”‚                â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚                â”‚
      â”‚                       â”‚                â”‚ init()         â”‚
      â”‚                       â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–º       â”‚
      â”‚                       â”‚                â”‚       âœ“        â”‚
      â”‚                       â”‚                â”‚â—„â”€â”€â”€â”€â”€â”€â”€        â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
      â”‚                       â”‚                â”‚                â”‚ init()
      â”‚                       â”‚                â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â–º
      â”‚                       â”‚                â”‚                â”‚    âœ“
      â”‚                       â”‚                â”‚                â”‚â—„â”€â”€â”€â”€â”€â”€
      â”‚                       â”‚                â”‚                â”‚
      â”‚ start_all()           â”‚                â”‚                â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ start()        â”‚                â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ start()        â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ start()
      â”‚                       â”‚                â”‚                â”‚
      â”‚ run_all()             â”‚                â”‚                â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ run()          â”‚                â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ run()          â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ run()
      â”‚                       â”‚                â”‚                â”‚
      â”‚ stop_all()            â”‚                â”‚                â”‚
      â”‚ (åå‘é¡ºåº!)           â”‚                â”‚                â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ stop()
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ stop()         â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ stop()         â”‚                â”‚
      â”‚                       â”‚                â”‚                â”‚
```

### 3. é…ç½®åŠ è½½æµç¨‹

```
æ–‡ä»¶ç³»ç»Ÿ              PluginRegistry          PluginMetadata
   â”‚                        â”‚                        â”‚
   â”‚ plugins_config.json    â”‚                        â”‚
   â”‚                        â”‚                        â”‚
   â”‚ load_config("path")    â”‚                        â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
   â”‚                        â”‚                        â”‚
   â”‚            è¯»å–æ–‡ä»¶å†…å®¹ â”‚                        â”‚
   â”‚                        â”‚                        â”‚
   â”‚          JSON ååºåˆ—åŒ–  â”‚                        â”‚
   â”‚                        â”‚                        â”‚
   â”‚                   åˆ›å»º Vec<PluginMetadata>      â”‚
   â”‚                        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                        â”‚                        â”‚
   â”‚                        â”‚        å…ƒæ•°æ®æ•°ç»„       â”‚
   â”‚                        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                        â”‚                        â”‚
   â”‚          âœ“             â”‚                        â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚
```

## ğŸ”Œ æ’ä»¶æ¥å£è®¾è®¡

### Plugin Trait è®¾è®¡åŸåˆ™

```rust
pub trait Plugin: Send + Sync {
    // â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    // â”‚  1. Send + Sync                      â”‚
    // â”‚     ç¡®ä¿çº¿ç¨‹å®‰å…¨                      â”‚
    // â”‚     å¯åœ¨çº¿ç¨‹é—´ä¼ é€’                    â”‚
    // â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    // â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    // â”‚  2. å¿…é¡»å®ç°çš„æ–¹æ³•                    â”‚
    // â”‚     è·å–æ’ä»¶å…ƒæ•°æ®                    â”‚
    // â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    fn metadata(&self) -> &PluginMetadata;

    // â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    // â”‚  3. å¯é€‰å®ç°çš„æ–¹æ³• (æœ‰é»˜è®¤å®ç°)       â”‚
    // â”‚     ç”Ÿå‘½å‘¨æœŸé’©å­                      â”‚
    // â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    fn init(&mut self) -> Result<()> { Ok(()) }
    fn start(&mut self) -> Result<()> { Ok(()) }
    fn run(&mut self) -> Result<()> { Ok(()) }
    fn stop(&mut self) -> Result<()> { Ok(()) }
    
    // â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    // â”‚  4. å·¥å…·æ–¹æ³•                          â”‚
    // â”‚     è¾…åŠ©åŠŸèƒ½                          â”‚
    // â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    fn is_enabled(&self) -> bool {
        self.metadata().enabled_by_default
    }
}
```

## ğŸ“Š ç±»å‹ç³»ç»Ÿ

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Plugin Trait  â”‚
                    â”‚  (interface)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   implements        â”‚
                  â”‚                     â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Code4renaPlugin   â”‚  â”‚ ExamplePlugin   â”‚  â”‚ CustomPlugin  â”‚
      â”‚                   â”‚  â”‚                 â”‚  â”‚               â”‚
      â”‚ + metadata        â”‚  â”‚ + metadata      â”‚  â”‚ + metadata    â”‚
      â”‚ + is_running      â”‚  â”‚ + config        â”‚  â”‚ + state       â”‚
      â”‚                   â”‚  â”‚ + handler       â”‚  â”‚               â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                         â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  PluginConfig   â”‚      â”‚  DataHandler    â”‚
                â”‚                 â”‚      â”‚                 â”‚
                â”‚ + max_workers   â”‚      â”‚ + process()     â”‚
                â”‚ + timeout       â”‚      â”‚ + cleanup()     â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  PluginRegistry      â”‚
                    â”‚                      â”‚
                    â”‚  plugins: Vec<       â”‚
                    â”‚    Box<dyn Plugin>   â”‚â—„â”€â”€â”€â”€ ç±»å‹æ“¦é™¤
                    â”‚  >                   â”‚      (Type Erasure)
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ è®¾è®¡æ¨¡å¼

### 1. Strategy Pattern (ç­–ç•¥æ¨¡å¼)
- æ¯ä¸ªæ’ä»¶æ˜¯ä¸€ä¸ªç­–ç•¥
- PluginRegistry æ˜¯ä¸Šä¸‹æ–‡
- Plugin trait æ˜¯ç­–ç•¥æ¥å£

### 2. Registry Pattern (æ³¨å†Œè¡¨æ¨¡å¼)
- PluginRegistry ç®¡ç†æ‰€æœ‰æ’ä»¶
- æä¾›ç»Ÿä¸€çš„æ³¨å†Œå’Œè®¿é—®æ¥å£

### 3. Template Method Pattern (æ¨¡æ¿æ–¹æ³•æ¨¡å¼)
- Plugin trait æä¾›é»˜è®¤å®ç°
- æ’ä»¶å¯é€‰æ‹©æ€§è¦†ç›–æ–¹æ³•

### 4. Builder Pattern (æ„å»ºå™¨æ¨¡å¼)
- PluginMetadata ä½¿ç”¨é“¾å¼è°ƒç”¨æ„å»º

## ğŸš€ æ‰©å±•ç‚¹

ç³»ç»Ÿè®¾è®¡äº†å¤šä¸ªæ‰©å±•ç‚¹ï¼š

1. **è‡ªå®šä¹‰å±æ€§** - `properties: HashMap<String, String>`
2. **ç”Ÿå‘½å‘¨æœŸé’©å­** - å¯æ·»åŠ æ›´å¤šé˜¶æ®µ
3. **é…ç½®ç³»ç»Ÿ** - å¯æ‰©å±•ä¸ºæ›´å¤æ‚çš„é…ç½®
4. **é€šä¿¡æœºåˆ¶** - å¯æ·»åŠ æ’ä»¶é—´é€šä¿¡
5. **ä¾èµ–ç®¡ç†** - å¯æ·»åŠ æ’ä»¶ä¾èµ–å…³ç³»

## âœ… è®¾è®¡ä¼˜åŠ¿

1. **ç±»å‹å®‰å…¨** âœ“
   - ç¼–è¯‘æ—¶æ£€æŸ¥
   - æ— è¿è¡Œæ—¶ç±»å‹é”™è¯¯

2. **å†…å­˜å®‰å…¨** âœ“
   - æ‰€æœ‰æƒç³»ç»Ÿä¿è¯
   - æ— å†…å­˜æ³„æ¼

3. **çº¿ç¨‹å®‰å…¨** âœ“
   - Send + Sync çº¦æŸ
   - æ— æ•°æ®ç«äº‰

4. **é›¶æˆæœ¬æŠ½è±¡** âœ“
   - Trait ç¼–è¯‘æ—¶å•æ€åŒ–
   - æ— è™šå‡½æ•°è¡¨å¼€é”€ï¼ˆé™æ€åˆ†å‘ï¼‰

5. **æ˜“äºæ‰©å±•** âœ“
   - æ¸…æ™°çš„æ¥å£
   - çµæ´»çš„å…ƒæ•°æ®ç³»ç»Ÿ

6. **æ˜“äºæµ‹è¯•** âœ“
   - æ¯ä¸ªæ’ä»¶ç‹¬ç«‹
   - å¯å•ç‹¬æµ‹è¯•

---

è¿™ä¸ªæ¶æ„å›¾å±•ç¤ºäº† Amadeus æ’ä»¶ç³»ç»Ÿçš„å®Œæ•´è®¾è®¡æ€è·¯å’Œå®ç°ç»†èŠ‚ï¼ğŸ¯

